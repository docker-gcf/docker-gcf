version: '3.7'

x-common: &common
#  restart: unless-stopped
  env_file:
    - env
  environment:
    - "GCF__gcf__entrypoint__debug__pillar__print=true"

services:
  nc-server:
    << : *common
    build:
      context: .
      dockerfile: nc-server/Dockerfile

    ports:
      - "0.0.0.0:4242:4242/tcp"
  nc-client:
    << : *common
    build:
      context: .
      dockerfile: nc-client/Dockerfile
    links:
      - nc-server
